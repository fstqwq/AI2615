!!! quote "一个不知名老梗"
    新人求助，降雨量那题，本机AC提交RE

不同的题目可能会有不同的情况，而 OJ 返回的结果也仅仅是一个参考：

* 有可能你是因为运算出错导致的超时，此时针对 TLE 结果优化程序性能是没有意义的。

下面是一些可能的情况与解决办法。

!!! failure "本地过了样例，但是提交全错"
    考虑本地与提交的差异：

    * 开启 `O2` 优化开关：优化会使得未定义行为报错。
    * Linux / Windows 差异：例如 `rand()` 范围是 $[0, 2 ^ 31)$ 而不是 $[0, 2 ^ 15)$。

    尝试带警告编译，有任何 warning 吗？

    * 对于 `long long` 用 `%d`，或者对于 `int` 用 `%lld`；
    * 需要返回值的函数没有返回值；
    * 内存越界等，参考 Runtime Error。

    本地使用 O2 编译运行，是否程序行为发生了改变？

    * 通常意味着未定义行为与数组越界。
    * 参考 Runtime Error 查错方法。

!!! bug "Wrong Answer: 错误点数很少"
    考虑 corner case；浮点数考虑存在精度误差的情况。

    或者，有可能只是因为数据很弱，导致错误点数很少。


!!! bug "Wrong Answer: 大数据出错"

    考虑越界，溢出等等。

    * 部分数组越界可能会因为内存特性，恰好修改到了有效地址上，导致答案错误。
    * 在数据比较大时，需要求的答案也可能很大，导致数据溢出。
    * 有的时候甚至会出现非常奇怪的未定义行为，例如 [unordered_map: 记一次有趣的 debug](/ref/debug_unordered_map)。
    * 参考 Runtime Error 查错方法。

!!! warning "Time Limit Exceeded"
    会不会是算法复杂度算错了？注意，OJ 在 TLE 时返回的时间可能是被杀死了，实际用时可能更长。
    
    有没有可能什么地方意外地将 $O(n \log n)$ 实现为 $O(n ^ 2)$ 了？
    
    * 特别注意内存拷贝：所有类是默认值传递的，包括 `vector`，`set` 等。需要引用传递（类似 Python 的浅拷贝）请使用 `&` 来传递引用。
    
    有没有可能死循环 / 死递归了？
    
    部分数组越界可能会导致运行超时，参考 Runtime Error 查错方法。

!!! warning "Memory Limit Exceeded"
    检查数组申请：内存是否真的存得下？会不会多打了一个 `0`？
    
    考虑动态申请的内存超限？如 STL 与 `new`。

!!! danger "Runtime Error"
    检查内存申请与过深递归。

    检查访问无效内存：数组越界，double free，使用失效的迭代器，访问 `end()` 及以后的元素。

    检查整数除 0 错误。

    使用调试器测试有问题的数据。

    检查未定义行为：例如，是否所有需要返回的地方都正确返回了？你可以打开编译警告发现一些这样的错误。

!!! duck "小黄鸭查错法"
    如果还没有找到错，你可以大声朗读并解释你的代码，来检查可能被忽视的细节。

!!! example "构造数据与对拍"
    当你知道答案有错却无法在代码中找到错误时，你可以尝试构造特殊数据来验证程序。你也可以使用对拍的方式生成随机数据，和一定正确的程序进行验证。

    详见 [构造数据与对拍](/debug/make_data)。